{% extends "base.html" %}

{% block title %}My Appointments{% endblock %}

{% block content %}
<h3 class="mb-3">My Appointments</h3>

{% if appointments %}
<table class="table table-striped table-hover table-sm align-middle">
  <thead>
    <tr>
      <th>Date</th>
      <th>Time</th>
      <th>Doctor</th>
      <th>Status</th>
      <th style="width: 200px;">Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for a in appointments %}
      <tr>
        <td>{{ a.date }}</td>
        <td>{{ a.time }}</td>
        <td>{{ a.doctor_name }}</td>
        <td>{{ a.status }}</td>
        <td>
          {% if a.status == 'Booked' %}
            <form method="post"
                  action="{{ url_for('cancel_appointment', appointment_id=a.id) }}"
                  style="display:inline-block">
              <button type="submit" class="btn btn-sm btn-outline-danger mb-1">
                Cancel
              </button>
            </form>
            <a href="{{ url_for('reschedule_appointment', appointment_id=a.id) }}"
               class="btn btn-sm btn-outline-primary mb-1">
              Reschedule
            </a>
          {% else %}
            <span class="text-muted small">No actions</span>
          {% endif %}
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
  <p>You have no appointments yet.</p>
{% endif %}
{% endblock %}
